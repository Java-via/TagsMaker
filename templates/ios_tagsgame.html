<!DOCTYPE html>
<!-- saved from url=(0037)http://v3.bootcss.com/examples/cover/ -->
<html lang="zh-CN" xmlns="http://www.w3.org/1999/html">
<head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">

    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- 上述3个meta标签*必须*放在最前面，任何其他内容都*必须*跟随其后！ -->
    <meta name="description" content="">
    <meta name="author" content="">
    <link rel="icon" href="../static/ic.jpg">

    <title>贴标签-游戏</title>

    <!-- Bootstrap core CSS -->
    <link href="../static/css/bootstrap.min.css" rel="stylesheet">

    <!-- Custom styles for this template -->
    <link href="../static/css/cover.css" rel="stylesheet">
</head>

<body>
<div class="site-wrapper">
    <div class="site-wrapper-inner">
        <div class="cover-container">
            <div class="page-header" style="height: 35px">
                <!--<div class="inner">-->
                    <h3 class="masthead-brand"><a href="./tagsbegin">贴标签-游戏</a></h3>
                    <nav>
                        <ul class="nav masthead-nav">
                            <li><label id="user_name"></label></li>
                            <li><label><a href="./logout">退出登录</a></label></li>
                            <li><a href="http://v3.bootcss.com/examples/cover/#"></a></li>
                        </ul>
                    </nav>
                <!--</div>-->
            </div>

            <div class="row">
                <div class="col-lg-12" style="padding-top: 2px">
                    <img id="app_img" src="#" style="height:100px; width: 100px ">
                </div>

                <div class="col-lg-12">
                    <div id="app_name" style="font-size: large"><a href="#" id="app_url">游戏名称</a></div>
                    <label id="app_pkgname" style="display: none"></label>
                    <label id="app_id" style="display: none"></label>
                </div>
            </div>
            <h2></h2>

            <div class="row">
                <div class="col-lg-12">
                    游戏关键词
                </div>
                <div class="col-lg-12" id="app_tags">
                    关键词1 关键词2 关键词3
                </div>
            </div>
            <h4>&nbsp;</h4>
            <div class="row">
                <div class="col-lg-12">游戏描述
                </div>
                <div class="col-lg-12" id="app_desc" style="text-align:justify">
                    游戏详情描述
                </div>
                <button class="btn btn-link btn-sm" id="show_ori">查看原网页</button>
                <button class="btn btn-link btn-sm" id="hidden_ori" style="display: none">隐藏原网页</button>
                <div class="col-lg-12">
                    <iframe id="app_iframe" src="#" style="height: 600px; width: 500px; display: none;" scrolling="yes">原网页</iframe>
                </div>
            </div>

            <h2>&nbsp;</h2>
            <div id="tags" class="row">
                <div class='col-lg-12' id='gender' style='text-align: left'>
                    <label id='label_gender' class="label" style="font-size: 15px"> 游戏类型&nbsp</label>
                    <select style="color: black" id="parent">
                        <option value="0">
                            游戏类型
                        </option>
                    </select>
                    <select style="color: black;" id="child">
                        <option value="0">子选项</option>
                    </select>
                </div>
            </div>
            <h2>&nbsp;</h2>
            <div class="row">
                <div class="col-lg-4">
                </div>
                <!--<div class="col-lg-2"></div>-->
                <div class="col-lg-4">
                    <button type="button" id="app_next" class="btn btn-info">下一个</button>
                    <!--<button type="button" id="group_next" class="btn btn-info" disabled="disabled">下一组</button>-->
                </div>
                <div class="col-lg-4">
                    <!--<button type="button" id="app_next" class="btn btn-info">下一个</button>-->
                </div>
            </div>
            <div class="footer">
                <div class="inner">
                    <p> by Jessie.</p>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Bootstrap core JavaScript
================================================== -->
<!-- Placed at the end of the document so the pages load faster -->
<script src="../static/js/jquery.min.js"></script>
<script src="../static/js/bootstrap.min.js"></script>
<!-- IE10 viewport hack for Surface/desktop Windows 8 bug -->
<script src="../static/js/ie10-viewport-bug-workaround.js"></script>

<script defer="defer" type="text/javascript">
    window.onload = function() {
        var parent_category = [
                "休闲游戏", "宝石消除", "动作射击", "儿童游戏", "角色扮演", "经营策略",
                "跑酷竞速", "棋牌桌游", "塔防守卫", "体育格斗", "网络游戏"
        ];
        for(var i=0; i<parent_category.length; i++) {
            $("#parent").append("<option value='" + (i+1) + "'>" + parent_category[i] + "</option>");
        }

    };
    $("#parent").change(function () {
        var parentid = Number($("#parent").val());
        var child = {"0": ["子分类"],
            "1": ["减压", "切东西", "找茬", "答题", "宠物", "益智", "解谜", "音乐节奏", "物理", "休闲", "猜猜看"],
            "2": ["消除", "宝石", "方块", "泡泡龙", "祖玛", "连连看"],
            "3": ["3D", "坦克", "射击", "横版", "狙击", "飞行", "空战", "枪战", "动作"],
            "4": ["拼图", "数学", "智力开发", "识字"],
            "5": ["ARPG", "三国", "修仙", "养成", "动漫", "即时战斗", "回合制", "武侠", "魔幻", "解谜逃脱"],
            "6": ["DOTA", "历史", "战争", "战棋", "经营", "策略塔防", "经营模拟", "装扮"],
            "7": ["摩托", "赛艇", "赛车", "跑酷", "飞机", "模拟驾驶"],
            "8": ["德州扑克", "斗地主", "桌游", "棋类", "纸牌", "麻将"],
            "9": ["抢滩登陆", "闯关"],
            "10": ["其他球类", "台球", "篮球", "网球", "街机", "足球", "桌球", "拳击", "趣味运动", "格斗"],
            "11": ["RPG", "动作竞技", "卡牌", "策略"]};
        var select2 = $("#child");
        var child_length = child[parentid].length;
        select2.empty();
        for(var i=0; i < child_length; i++){
            select2.append("<option value='" + (i+1) + "'>" + child[parentid][i] + "</option>");
        }
    });
    $("#btn_sub").click(function () {
        console.log($("#parent").find("option:selected").text() + ":" + $("#child").find("option:selected").text());
    });
    window.onload = function () {

        $.ajax({
            url: "/gameinfo",
            dataType: "json",
            async: false,
            type: "GET",
            beforeSend: function () {

            },
            success: function (data) {
                $("#user_name").text(data.username);
                if (data.msg.toString() == "has data") {
                    apps = data.apps;

                    var app = apps[index];
                    $('#app_pkgname').text(app[0]);
                    $('#app_id').text(app[7]);
                    $('#app_name').text(app[1]);
                    $('#app_tags').text(app[3]);
                    $('#app_iframe').attr("src", app[5]);
                    $('#app_desc').text(app[2]);
                    $('#app_url').attr("href ", app[5]);
                    $('#app_img').attr("src", app[6]);
                    index = index + 1;
                }else if (data.msg.toString() == "用户未登录"){
                    alert(data.msg.toString());
                    window.location.href = "./sig"
                } else {
                    alert(data.msg.toString());
                }
            },
            complete: function () {

            },
            error: function (err) {
                console.log(err)
            }
        });

        $("#show_ori").click(function () {
            $("#app_iframe").show();
            $("#show_ori").hide();
            $("#hidden_ori").show();
        });

        $("#hidden_ori").click(function () {
            $("#app_iframe").hide();
            $("#hidden_ori").hide();
            $("#show_ori").show();
        });

        $("#app_next").click(function () {
            var tagsname, tagsvalue;
            var gender = $("input[name=gender]:checked").val();
            $("input[name=gender]").removeAttr("checked");
            var marital = $("input[name=marital]:checked").val();
            $("input[name=marital]").removeAttr("checked");
            var havecar = $("input[name=havecar]:checked").val();
            $("input[name=havecar]").removeAttr("checked");
            var degree = $("input[name=degree]:checked").val();
            $("input[name=degree]").removeAttr("checked");

            var age_count = $("input[name=age]").size();
            var style_count = $("input[name=style]").size();
            var theme_count = $("input[name=theme]").size();
            var age = "";
            var style = "";
            var theme = "";
            for(var iage=0; iage < age_count; iage++) {
                if($("input[name=age]").get(iage).checked) {
                    age += $("input[name=age]").get(iage).value + ";";
                }
            }

            for(var istyle=0; istyle < style_count; istyle++) {
                if($("input[name=style]").get(istyle).checked) {
                    style += $("input[name=style]").get(istyle).value + ";";
                }
            }
            for(var itheme=0; itheme < theme_count; itheme++) {
                if($("input[name=theme]").get(itheme).checked) {
                    theme += $("input[name=theme]").get(itheme).value + ";";
                }
            }
            $("input[name=age]").attr("checked", false);
            $("input[name=style]").attr("checked", false);
            $("input[name=theme]").attr("checked", false);
            tagsname = "gender,marital,havecar,degree,age,style,theme";
            tagsvalue = gender + "," + marital + "," + havecar + "," + degree + "," + age + "," + style + "," + theme;

            $.ajax({
                url: "/gametags",
                dataType: "json",
                // async : false,
                data: {
                    pkgname: $("#app_pkgname").text(),
                    appid: $("#app_id").text(),
                    tagsname: tagsname,
                    tagsvalue: tagsvalue,
                    index: index
                },
                type: "GET",
                beforeSend: function () {

                },
                success: function (data) {
                    if (data.msg.toString() == "another ten") {
                        index = 0;
                        apps = data.apps;
                        var app = apps[index];
                        $('#app_pkgname').text(app[0]);
                        $('#app_id').text(app[7]);
                        $('#app_name').text(app[1]);
                        $('#app_tags').text(app[3]);
                        $('#app_iframe').attr("src", app[5]);
                        $('#app_desc').text(app[2]);
                        $('#app_url').attr("href ", app[5]);
                        $('#app_img').attr("src", app[6]);

                        index = index + 1;


                    } else if (data.msg.toString() == "success") {
                        var app = apps[index];
                        $('#app_pkgname').text(app[0]);
                        $('#app_id').text(app[7]);
                        $('#app_name').text(app[1]);
                        $('#app_tags').text(app[3]);
                        $('#app_iframe').attr("src", app[5]);
                        $('#app_desc').text(app[2]);
                        $('#app_url').attr("href ", app[5]);
                        $('#app_img').attr("src", app[6]);

                        index = index + 1;

                    } else if (data.msg.toString() == "用户未登录"){
                        alert(data.msg.toString());
                        window.location.href = "./sig"
                    } else {
                        alert(data.msg.toString());
                    }

                },
                complete: function () {

                },
                error: function (err) {
                    console.log(err)
                }
            });
        });
    }
</script>

</body></html>